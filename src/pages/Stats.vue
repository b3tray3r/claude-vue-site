<template>
  <div class="flex flex-col min-h-screen text-white">
    <main class="flex-grow py-16 px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto space-y-10">
        <div class="text-center">
          <h1 class="text-3xl sm:text-4xl font-bold text-primary mb-2">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞</h1>
          <p class="text-gray-400 text-sm">–î–∞–Ω–Ω—ã–µ –æ–± –æ–Ω–ª–∞–π–Ω–µ, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–æ–≤ –∏ –ø—Ä–æ—á–µ–µ</p>
        </div>
        <PlayerStats />
      </div>
    </main>

    <RconLogin />
  </div>
</template>

<script setup>
import PlayerStats from '../components/PlayerStats.vue'
import RconLogin from '../components/RconLogin.vue'
import { onMounted, onUnmounted } from 'vue'
import { useWebRcon } from '../composables/useWebRcon.js' // –∏–ª–∏ –ø—É—Ç—å –∫ —Ç–≤–æ–µ–º—É —Ö—É–∫—É

const { startAutoFetch, stopAutoFetch } = useWebRcon()

// –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
onMounted(() => {
  // –ó–∞–ø—É—Å–∫–∞–µ–º —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 1 –º–∏–Ω—É—Ç–∞ (–¥–ª—è —Ç–µ—Å—Ç–∞)
  startAutoFetch(1000 * 60)

  // –ú–æ–∂–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–∑–≤–∞—Ç—å –∏ —Ä—É—á–Ω–æ–π –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å:
  // connect()
})

// –û—á–∏—â–∞–µ–º —Ç–∞–π–º–µ—Ä –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
onUnmounted(() => {
  stopAutoFetch()
})
</script>

<style scoped>
.text-primary {
  @apply text-orange-400;
}
</style>
